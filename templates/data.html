{% extends 'index.html' %}

{% block title %}Table Data{% endblock %}

{% block content %}
<head>
    <link rel="stylesheet" href="{{ url_for('static', filename='./styles/style.css') }}">
</head>
    <!-- Form to select a different sensor and set the number of rows -->

<div class="container" style="width:40%">
    <h1>Select a Sensor</h1>
    <form action="{{ url_for('display_data') }}" method="POST">
        <select name="table_name">
            {% for table in tables %}
                {% if selected_table == table %}
                    <option value="{{ table }}" selected>{{ table }}</option>
                {% else %}
                    <option value="{{ table }}">{{ table }}</option>
                {% endif %}
            {% endfor %}
        </select>
        <label for="num_rows">Number of minutes:</label>
        <input type="number" name="num_rows" value="10" min="1"> <!-- Default value is 10, you can adjust as needed -->

        <input type="submit" value="Show Data">
    </form>
</div>


    <h1>Data from {{ selected_table }} from last {{num_rows}} minutes</h1>

    <button onclick="printData()">Print Data</button>

    <br>

    <script>
        function printData() {
            window.print();
        }
    </script>

    <table border="1">
        <thead>
            <tr>
                <th>X axis</th>
                <th>Y axis</th>
                <th>Z axis</th>
            </tr>
        </thead>
        <tbody>
            {% for row in table_data %}
                <tr>
                    <td>{{ row[0] }}</td>
                    <td>{{ row[1] }}</td>
                    <td>{{ row[2] }}</td>
                  
                </tr>
            {% endfor %}
        </tbody>
    </table>

 
{% endblock %}
